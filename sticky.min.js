!function(t){window.sticky={selection:[]},cloneForResize=function(t){var o=t.clone();return o[0].style.visibility="hidden",o[0].style.marginBottom="-"+o.outerHeight()+"px",o},updateContainedOffset=function(o){for(var e=o.data&&o.data.$selection?o.data.$selection:o,n=0;n<e.length;n++){for(var i=e[n],f=t(i),s=0;s<i.ev.length;s++)if("sticked"==i.ev[s].flag)var r=i.ev[s];r&&(i.$stickyClone.insertBefore(f),i.$stickyClone[0].style.marginBottom="-"+i.$stickyClone.outerHeight()+"px",window.raf.on("nextframe",{$el:f},function(t){var o=t.data.$el,e=o[0];e.$stickyClone&&(o.scrollEvents("set","contained",{offset:-(r.container.outerHeight()-e.$stickyClone.position().top-e.$stickyClone.outerHeight()-r.offsetBottom)+r.offset}),e.$stickyClone.remove())}))}},t.extend(t.fn,{sticky:function(o,e){var n=t(this),i=typeof o;if("update"==o&&updateContainedOffset(n),"string"==i)return t(this).scrollEvents(o,e);var e=t.extend(!0,{container:!1,inverted:!1,offset:0,offsetBottom:0,reset:void 0,fixed:void 0,contained:void 0,fixedTop:void 0,fixedBottom:void 0,scrolling:void 0},o);if(e.inverted)n.scrollEvents({order:2,flag:"inverted sticky top",offset:e.offset,topUp:e.fixedTop}),n.scrollEvents({order:1,flag:"scrolling top",offset:e.offset,topDown:e.scrolling}),n.scrollEvents({order:1,flag:"scrolling bottom",offsetBottom:e.offsetBottom,bottomUp:e.scrolling}),n.scrollEvents({order:2,flag:"inverted sticky bottom",offsetBottom:e.offsetBottom,bottomDown:e.fixedBottom});else{for(var f=0;f<n.length;f++){var s=t(n[f]);s.scrollEvents({order:2,flag:"sticked",container:e.container,offset:e.offset,offsetBottom:e.offsetBottom,topDown:e.reset,topUp:e.fixed}),e.container&&(s[0].$stickyClone=cloneForResize(s),s.scrollEvents({order:1,flag:"contained",offset:-(e.container.outerHeight()-s.position().top-s.outerHeight()-e.offsetBottom)+e.offset,container:e.container,topDown:e.fixed,topUp:e.contained}))}e.container&&(updateContainedOffset(n),window.raf.on("afterdocumentresize",{$selection:n},updateContainedOffset))}}})}(jQuery);