!function(e){function t(e,t,i){return t>e?t:e>i?i:e}function i(e,t,i,s){(e.isVisible&&e.b<=se.t||s&&e.b<=se.t)&&(t&&(e.isVisible=!1),i&&e.up(e))}function s(e,t,i,s){(e.isVisible&&e.t>=se.b||s&&e.t>=se.b)&&(t&&(e.isVisible=!1),i&&e.down(e))}function o(e,t,i,s){(!e.isVisible&&e.t<se.b&&e.b>se.t||s&&e.t<se.b&&e.b>se.t)&&(t&&(e.isVisible=!0),i&&e.visible(e))}function n(e,t,i,s){(e.isTopVisible&&e.t<=se.t||s&&e.t<=se.t)&&(t&&(e.isTopVisible=!1),i&&e.topUp(e))}function l(e,t,i,s){(!e.isTopVisible&&e.t>se.t||s&&e.t>se.t)&&(t&&(e.isTopVisible=!0),i&&e.topDown(e))}function r(e,t,i,s){(e.isBottomVisible&&e.b<se.b||s&&e.b<se.b)&&(t&&(e.isBottomVisible=!1),i&&e.bottomUp(e))}function a(e,t,i,s){(!e.isBottomVisible&&e.b>=se.b||s&&e.b>=se.b)&&(t&&(e.isBottomVisible=!0),i&&e.bottomDown(e))}function c(e,i,s,o){(e.isVisible&&e.b<=se.t||o&&e.b<=se.t)&&(i&&!e.up&&(e.isVisible=!1),s&&window.raf.off(e.container,"scroll",e.travel)),(e.isVisible&&e.t>=se.b||o&&e.t>=se.b)&&(i&&!e.down&&(e.isVisible=!1),s&&window.raf.off(e.container,"scroll",e.travel)),(!e.isVisible&&e.t<se.b&&e.b>se.t||o&&e.t<se.b&&e.b>se.t)&&(i&&!e.visible&&(e.isVisible=!0),(s||o)&&window.raf.on(e.container,"scroll",{delta:function(){return t(Math.round((se.t-(e.t-se.wh))/(e.h+e.offset+e.offsetBottom+se.wh)*e.round)/e.round,0,1)},selection:e.selection,index:e.i,height:e.h},e.travel))}function f(e){e.checks=[],e.travel&&e.checks.push({fn:c,activate:!0,callback:!!e.travel}),(e.up||e.checkdown||e.visible)&&e.checks.push({fn:i,activate:!0,callback:!!e.up},{fn:s,activate:!0,callback:!!e.down},{fn:o,activate:!0,callback:!!e.visible}),(e.topUp||e.topDown)&&e.checks.push({fn:n,activate:!0,callback:!!e.topUp},{fn:l,activate:!0,callback:!!e.topDown}),(e.bottomUp||e.bottomDown)&&e.checks.push({fn:r,activate:!0,callback:!!e.bottomUp},{fn:a,activate:!0,callback:!!e.bottomDown})}function b(e,t){return e.order<t.order?-1:e.order>t.order?1:0}function h(){se.t=$win.scrollTop(),se.b=se.t+se.wh;for(var e=0;e<se.selection.length;e++)for(var t=se.selection[e],i=0;i<t.ev.length;i++)(function(e){if(!e.disabled)for(var t=0;t<e.checks.length;t++){var i=e.checks[t];i.fn(e,i.activate,i.callback)}})(t.ev[i])}function v(){se.t=$win.scrollTop(),se.b=se.t+se.wh;for(var e=0;e<se.selection.length;e++)for(var t=se.selection[e],i=0;i<t.ev.length;i++)(function(e){if(!e.disabled)for(var t=0;t<e.checks.length;t++){var i=e.checks[t];i.fn(e,i.activate,i.callback,!0)}})(t.ev[i])}function u(){se.wh=$win.height();for(var t=0;t<se.selection.length;t++){var i=e(se.selection[t]),s=i[0],o=i.outerHeight();s.style.position=s.initialStates.position,s.style.top=s.initialStates.top;for(var n=Math.round(i.offset().top),l=0;l<s.ev.length;l++){var r=s.ev[l];r.h=o,r.t=n-r.offset,r.b=r.t+r.h+r.offsetBottom}s.style.position="",s.style.top=""}}function d(e){"update"==e?(u(),v()):u()}function p(t,i,s,o){if("destroy"==i)window.raf.off("scroll",h),window.raf.on("afterdocumentresize",d),window.se.selection=[];else if("resize"==i)d();else if("trigger"==i)h("update");else if("update"==i)d("update");else if("disable"==i||"enable"==i||"remove"==i||"set"==i||"eval"==i){for(var t=e(t),n=[],l=0;l<t.length;l++){var r=t[l];if(r.ev)if("remove"==i)n.push(r);else for(var a=0;a<r.ev.length;a++){var f=r.ev[a];if("eval"==i){var b=o?o:s,v=o?s:!1;if(f[b]&&(!v||v&&v==f.flag))return"travel"==b?{data:{delta:function(){return Math.round((se.t-(f.t-se.wh))/(f.h+se.wh)*100)/100},selection:f.selection,index:f.i,height:f.h}}:f[b](f)}else s?f.flag==s&&("disable"==i?(f.disabled=!0,f.travel&&window.raf.off(f.container,"scroll",f.travel)):"enable"==i?(f.disabled=!1,f.travel&&(p.isVisible=!1,c(f,!0,!0))):"set"==i&&e.extend(!0,f,o)):"disable"==i?(f.disabled=!0,f.travel&&window.raf.off(f.container,"scroll",f.travel)):"enable"==i?(f.disabled=!1,f.travel&&(f.isVisible=!1,c(f,!0,!0))):"set"==i&&e.extend(!0,f,o)}}if("remove"==i){n.sort(function(e,t){return t.ev.se-e.ev.se});for(var u=0;u<n.length;u++){var p=n[u];p.ev&&!p.ev.travel&&window.raf.off(p.container,"scroll",p.ev.visibleFn),se.selection.splice(p.ev.se,1)}for(var l=0;l<se.selection.length;l++)se.selection[l].ev.se=l}}return t}$win=e(window),window.se={selection:[],t:$win.scrollTop(),b:$win.height(),wh:$win.height()},Function.prototype.clone=function(){var e=this,t=function(){return e.apply(this,arguments)};for(var i in this)this.hasOwnProperty(i)&&(t[i]=this[i]);return t},e.extend(e.fn,{scrollEvents:function(t,i,s){return"string"==typeof t?p(this,t,i,s):(e(this).each(function(i){var s=e.extend(!0,{selection:e(this),container:$win,flag:!1,order:0,offset:0,offsetBottom:0,round:100,visible:!1,up:!1,down:!1,topUp:!1,topDown:!1,bottomUp:!1,bottomDown:!1,travel:!1,isVisible:!1,isTopVisible:!1,isBottomVisible:!1,h:e(this).outerHeight(),t:0,b:e(this).outerHeight(),i:i,disabled:!1,checks:[]},t);s.travel=t.travel?t.travel.clone():!1,f(s);for(var o=!1,n=0;n<se.selection.length;n++)se.selection[n]==this&&(o=!0);o||(se.selection.push(this),s.se=se.selection.length,this.initialStates={position:e(this).css("position"),top:e(this).css("top")}),this.ev||(this.ev=[]),this.ev.push(s),this.ev.sort(b)}),window.raf.off("scroll",h).on("scroll",h),window.raf.off("afterdocumentresize",d).on("afterdocumentresize",d),this)}}),e(document).ready(function(){window.raf.on("nextframe",function(){d("update")})})}(jQuery);