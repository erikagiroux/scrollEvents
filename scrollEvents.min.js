!function(e){function t(e,t,i){e.isVisible&&e.b<=se.t&&(t&&(e.isVisible=!1),i&&e.up(e))}function i(e,t,i){e.isVisible&&e.t>=se.b&&(t&&(e.isVisible=!1),i&&e.down(e))}function s(e,t,i){!e.isVisible&&e.t<se.b&&e.b>se.t&&(t&&(e.isVisible=!0),i&&e.visible(e))}function n(e,t,i){e.topIsVisible&&e.t<=se.t&&(t&&(e.topIsVisible=!1),i&&e.topOut(e))}function o(e,t,i){!e.topIsVisible&&e.t>se.t&&(t&&(e.topIsVisible=!0),i&&e.topIn(e))}function l(e,t,i){e.isVisible&&e.b<=se.t&&(t&&!e.up&&(e.isVisible=!1),i&&e.container.off("scroll",e.travel)),e.isVisible&&e.t>=se.b&&(t&&!e.down&&(e.isVisible=!1),i&&e.container.off("scroll",e.travel)),!e.isVisible&&e.t<se.b&&e.b>se.t&&(t&&!e.visible&&(e.isVisible=!0),i&&e.container.on("scroll",{delta:function(){return Math.round((se.t-(e.t-se.wh))/(e.h+se.wh)*100)/100},selection:e.selection,index:e.i,height:e.h},e.travel))}function r(e){e.checks=[],e.travel&&e.checks.push({fn:l,activate:!0,callback:!!e.travel}),(e.up||e.checkdown||e.visible)&&e.checks.push({fn:t,activate:!0,callback:!!e.up},{fn:i,activate:!0,callback:!!e.down},{fn:s,activate:!0,callback:!!e.visible}),(e.topOut||e.topIn)&&e.checks.push({fn:n,activate:!0,callback:!!e.topOut},{fn:o,activate:!0,callback:!!e.topIn})}function a(){se.t=$win.scrollTop(),se.b=se.t+se.wh;for(var e=0;e<se.items.length;e++)for(var t=se.items[e],i=0;i<t.ev.length;i++)(function(e){if(!e.disabled)for(var t=0;t<e.checks.length;t++){var i=e.checks[t];i.fn(e,i.activate,i.callback)}})(t.ev[i])}function c(){se.t=$win.scrollTop(),se.b=se.t+se.wh;for(var e=0;e<se.items.length;e++)for(var t=se.items[e],i=0;i<t.ev.length;i++)(function(e){if(!e.disabled)for(var t=0;t<e.checks.length;t++){var i=e.checks[t];i.fn(e,i.activate,!1)}})(t.ev[i])}function f(){se.wh=$win.height();for(var t=0;t<se.items.length;t++){var i=e(se.items[t]),s=i[0],n=i.outerHeight(),o=s.style.position,l=s.style.top;s.style.position=s.initialStates.position,s.style.top=s.initialStates.top;var r=Math.round(i.offset().top);s.style.position=o,s.style.top=l;for(var a=0;a<s.ev.length;a++){var c=s.ev[a];c.h=n,c.t=r-c.offset,c.b=c.t+c.h}}}function h(e){"update"==e?(f(),c()):(clearTimeout(v),v=setTimeout(function(){f(),$win.trigger("hardResize")},150))}$win=e(window),window.se={items:[],t:$win.scrollTop(),b:$win.height(),wh:$win.height()},Function.prototype.clone=function(){var e=this,t=function(){return e.apply(this,arguments)};for(var i in this)this.hasOwnProperty(i)&&(t[i]=this[i]);return t},e.extend(e.fn,{scrollEvents:function(t,i,s){if("string"==typeof t){if("destroy"==t)$win.off("scroll",a).off("resize",h),window.items=[];else if("resize"==t)h();else if("trigger"==t)a("update");else if("update"==t)h("update");else if("disable"==t||"enable"==t||"remove"==t||"set"==t){for(var n=e(this),o=[],c=0;c<n.length;c++){var f=n[c];if(f.ev)if("remove"==t)o.push(f);else for(var v=0;v<f.ev.length;v++){var b=f.ev[v];i?b.flag==i&&("disable"==t?(b.disabled=!0,b.travel&&p.container.off("scroll",b.travel)):"enable"==t?(b.disabled=!1,b.travel&&(p.isVisible=!1,l(b,!0,!0))):"set"==t&&e.extend(!0,b,s)):"disable"==t?(b.disabled=!0,b.travel&&b.container.off("scroll",b.travel)):"enable"==t?(b.disabled=!1,b.travel&&(b.isVisible=!1,l(b,!0,!0))):"set"==t&&e.extend(!0,b,s)}}if("remove"==t){o.sort(function(e,t){return t.ev.se-e.ev.se});for(var u=0;u<o.length;u++){var p=o[u];p.ev&&!p.ev.once&&$win.off("scroll",p.ev.visibleFn),se.items.splice(p.ev.se,1)}for(var c=0;c<se.items.length;c++)se.items[c].ev.se=c}}return this}return e(this).each(function(i){var s=e.extend(!0,{selection:e(this),flag:!1,offset:0,visible:!1,up:!1,down:!1,topOut:!1,topIn:!1,travel:!1,isVisible:!1,topIsVisible:!1,container:$win,h:e(this).outerHeight(),t:0,b:e(this).outerHeight(),i:i,disabled:!1,checks:[]},t);s.travel=s.travel?t.travel.clone():!1,r(s);for(var n=!1,o=0;o<se.items.length;o++)se.items[o]==this&&(n=!0);n||(se.items.push(this),s.se=se.items.length,this.initialStates={position:e(this).css("position"),top:e(this).css("top")}),this.ev||(this.ev=[]),this.ev.push(s)}),$win.off("scroll",a).off("resize",h),$win.on("scroll",a).on("resize",h),this}});var v;h()}(jQuery);